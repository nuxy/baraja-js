"use strict";function Baraja(r,n){var g=this,t={easing:"ease-in-out",speed:300};function s(){(0<arguments.length&&void 0!==arguments[0]?arguments[0]:g.items).forEach(function(n,t){n.style.zIndex=(g.zIndexMin+g.itemTotal-1-t).toString()})}function l(n,t){var i="next"===t,e=parseInt(n.style.zIndex);n.style.zIndex=i?g.zIndexMin-1:g.zIndexMin+g.itemTotal,g.items.forEach(function(n){var t=parseInt(n.style.zIndex);(i?t<e:e<t)&&(n.style.zIndex=i?t+1:t-1)})}function c(){(0<arguments.length&&void 0!==arguments[0]?arguments[0]:g.items).forEach(function(n){n.addEventListener("click",function(){g.isAnimating||function(t){g.isAnimating=!0;var n=parseInt(t.style.zIndex)===g.zIndexMin+g.itemTotal-1,i=n?function(){g.isAnimating=!1}:function(){return!1};if(t=n?null:t,g.isClosed?a():o(i,t),!n){f(t),m(t,50,50),t.style.opacity="0",t.style.transform="scale(2) translate(100px) rotate(20deg)",l(t,"prev");var e=window.setTimeout(function(){u(t,"all",g.options.speed,"ease-in"),v(t,"none",function n(){t.removeEventListener("transitionend",n),g.isAnimating=!1}),window.clearTimeout(e)},g.options.speed/2)}}(n)},!0)})}function f(n){n.style.transition="none"}function m(n,t,i){n.style.transformOrigin=t+"% "+i+"%"}function u(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"all",i=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:g.options.speed)+"ms "+(3<arguments.length&&void 0!==arguments[3]?arguments[3]:g.options.easing)+" "+(4<arguments.length&&void 0!==arguments[4]?arguments[4]:0)+"ms";n.style.transition="transform"===t?"transform "+i:t+" "+i}function v(n,t,i){var e=3<arguments.length&&void 0!==arguments[3]&&arguments[3];i&&(n.addEventListener("transitionend",i,!1),e&&i.call());var o=window.setTimeout(function(){"none"===t&&(n.style.opacity="1"),n.style.transform=t,window.clearTimeout(o)},25)}function i(n){r.insertAdjacentHTML("beforeend",n);var t=g.itemTotal,i=h();g.items=i.slice(),g.itemTotal=i.length;var e=Math.abs(g.itemTotal-t),o=i.splice(t,e);o.forEach(function(n){n.style.opacity="0"}),c(o),s(o),o=o.reverse();var a=0;o.forEach(function(t,n){t.style.transform="scale(1.8) translate(200px) rotate(15deg)",u(t,"all","500","ease-out",200*n);v(t,"none",function n(){++a,t.removeEventListener("transitionend",n),f(t),a===e&&(g.isAnimating=!1)})})}function o(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=g.items;t&&(n=n.filter(function(n){return n!==t}));var o=g.isClosed;n.forEach(function(i){v(i,"none",function n(){g.isClosed=!0,i.removeEventListener("transitionend",n),f(i);var t=window.setTimeout(function(){m(i,50,50),e&&e.call(),window.clearTimeout(t)},25)},o)})}function a(){var n,s=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};g.isClosed=!1,(n=s).direction=n.direction||g.fanSettings.direction,n.easing=n.easing||g.fanSettings.easing,n.speed=n.speed||g.fanSettings.speed,n.range=n.range||g.fanSettings.range,n.translation=n.translation||g.fanSettings.translation,n.origin?(n.origin.x=n.origin.x||g.fanSettings.origin.x,n.origin.y=n.origin.y||g.fanSettings.origin.y):n.origin=g.fanSettings.origin,n.center||(n.center=g.fanSettings.center),n.scatter||(n.scatter=g.fanSettings.scatter),g.direction=n.direction;var l="left"===(s=n).direction;if(s.origin.minX&&s.origin.maxX){var e=s.origin.maxX,o=s.origin.minX,a=(e-o)/g.itemTotal;g.items.forEach(function(n){var t=parseInt(n.style.zIndex),i=(g.itemTotal-1-(t-g.zIndexMin))*(e-o+a)/g.itemTotal+o;l&&(i=e+o-i),m(n,i,s.origin.y)})}else g.items.forEach(function(n){m(n,s.origin.x,s.origin.y)});var c=s.range/(g.itemTotal-1),f=s.translation/(g.itemTotal-1),d=0;g.items.forEach(function(t){u(t,"transform");var n=parseInt(t.style.zIndex),i=g.itemTotal-1-(n-g.zIndexMin),e=(s.center?s.range/2:s.range)-c*i,o=f*(g.itemTotal-i-1);if(l&&(e*=-1,o*=-1),s.scatter){var a=Math.floor(Math.random()*c),r=Math.floor(Math.random()*f);i!==g.itemTotal-1&&(l?(e+=a,o-=r):(e-=a,o+=r))}v(t,"translate("+o+"px) rotate("+e+"deg)",function n(){++d,t.removeEventListener("transitionend",n),d===g.itemTotal-1&&(g.isAnimating=!1)})})}function e(n){g.isClosed=!1;var t="next"===n,i=t?g.zIndexMin+g.itemTotal-1:g.zIndexMin,e=g.items.find(function(n){return parseInt(n.style.zIndex)===i}),o=void 0,a=void 0;a=t?(o=5,e.offsetWidth+15):(o=-5,-1*e.offsetWidth-15),u(e,"transform");var r="translate("+a+"px) rotate("+o+"deg)",s=function(){e.removeEventListener("transitionend",s),l(e,n),v(e,r="translate(0px) rotate(0deg)",s=function(){e.removeEventListener("transitionend",s),g.isAnimating=!1,g.isClosed=!0})};v(e,r,s)}function d(n,t){(1<g.itemTotal||!g.isAnimating)&&(g.isAnimating=!0,g.isClosed?n.call(g,t):o(function(){n.call(g,t)}))}function h(){var n=r.querySelectorAll("li");if(n)return Array.prototype.slice.call(n)}!function(){if(g.options=Object.assign(t,n),g.fanSettings={easing:"ease-out",direction:"right",origin:{x:25,y:100},speed:500,range:90,translation:0,center:!0,scatter:!1},g.items=h(),g.itemTotal=g.items.length,!(1<g.itemTotal))throw new Error("Failed to initialize (no items found)");g.isClosed=!0,g.zIndexMin=1e3,s(),c()}(),this.add=function(n){d(i,n)},this.fan=function(n){d(a,n)},this.next=function(){d(e,"next")},this.previous=function(){d(e,"prev")},this.close=function(){g.isAnimating||o()}}window.baraja=function(n,t){return new Baraja(n,t)},"undefined"!=typeof module&&module.exports&&(module.exports=Baraja);